<!doctype html>
<html lang="de"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="robots" content="noindex"><meta><title>Tag: Edge computing - Iggie Wang&#039;s Cyberspace</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Iggie Wang&#039;s Cyberspace"><meta name="msapplication-TileImage" content="/img/dog.jpg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Iggie Wang&#039;s Cyberspace"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="Iggie Wang&#039;s Cyberspace"><meta property="og:url" content="https://www.iggiewang.cn/"><meta property="og:site_name" content="Iggie Wang&#039;s Cyberspace"><meta property="og:image" content="https://www.iggiewang.cn/img/og_image.png"><meta property="article:author" content="王亮"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.iggiewang.cn"},"headline":"Iggie Wang's Cyberspace","image":["https://www.iggiewang.cn/img/og_image.png"],"author":{"@type":"Person","name":"王亮"},"publisher":{"@type":"Organization","name":"Iggie Wang's Cyberspace","logo":{"@type":"ImageObject","url":null}},"description":""}</script><link rel="icon" href="/img/dog.jpg"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.15.2/css/all.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/pace/1.0.2/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">Iggie Wang&#039;s Cyberspace</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item search" title="Suche" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/tags">Tags</a></li><li class="is-active"><a href="#" aria-current="page">Edge computing</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Gepostet vor&nbsp;<time dateTime="2023-07-21T10:11:31.000Z" title="2023/7/21 下午6:11:31">2023-07-21</time></span><span class="level-item">7 minutes lesen (Über 994 Wörter)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/07/21/MQTT-Publish-Subscribe/">MQTT Publish/Subscribe</a></h1><div class="content"><h2 id="Publish"><a href="#Publish" class="headerlink" title="Publish"></a>Publish</h2><p>Each message must include a topic, through which the broker delivers the message to clients interested in that topic. The specific content of the message is passed in binary form. MQTT is agnostic to the content of the message, and the client can send data in any format, such as binary data, text data, XML data, or JSON data, etc.</p>
<h3 id="Format"><a href="#Format" class="headerlink" title="Format"></a>Format</h3><div align="center">
<img src="/2023/07/21/MQTT-Publish-Subscribe/1.png" style="zoom:100%;">
</div>

<p>The topic is a hierarchical structure composed of strings separated by slashes, for example, “home/bedroom/temperature”.</p>
<h4 id="Quality-of-Service"><a href="#Quality-of-Service" class="headerlink" title="Quality of Service"></a>Quality of Service</h4><p>Quality of Service determines the guarantee level for message delivery to the target. Quality of Service is divided into three levels: 0, 1, 2. 0 means the message is delivered at most once, and if it fails, no retries will be made. 1 means the message is delivered at least once, and if the recipient does not explicitly receive it (returns acked), it will continue to retry sending. 2 means the message is delivered exactly once.</p>
<h4 id="Retain-Flag"><a href="#Retain-Flag" class="headerlink" title="Retain Flag"></a>Retain Flag</h4><p>The retain flag determines whether the message is retained as the latest message for this topic. When a new client subscribes to this topic, it will receive the latest retained message for this topic. For each topic, there can be at most one retained message, but there may also be none.</p>
<h4 id="Message-Payload"><a href="#Message-Payload" class="headerlink" title="Message Payload"></a>Message Payload</h4><p>The message payload is the specific content of the message. MQTT is unaware of the content of the message, so users can send any message.</p>
<h4 id="Duplicate-Field"><a href="#Duplicate-Field" class="headerlink" title="Duplicate Field"></a>Duplicate Field</h4><p>When the quality of service of the message is greater than 0, this field is set when the message is retried.</p>
<h3 id="QoS-Levels"><a href="#QoS-Levels" class="headerlink" title="QoS Levels"></a>QoS Levels</h3><p>MQTT supports three Quality of Service (QoS) levels. They are defined as follows:</p>
<ol>
<li><p>QoS 0: At most once delivery<br>This is the lowest level of service. A message is delivered at most once, and it might not be delivered at all if network disruptions occur. The message is sent from the sender (publisher) to the receiver (subscriber) without any confirmation message. There is no retransmission of the message.</p>
</li>
<li><p>QoS 1: At least once delivery<br>In this level of service, a message is assured to be delivered at least once to the receiver. After the sender sends the message, it stores a copy of the message until it receives a PUBACK message from the receiver. If the sender does not receive a PUBACK message within a certain period, it will resend the message.</p>
</li>
<li><p>QoS 2: Exactly once delivery<br>This is the highest level of service, where a message is assured to be delivered exactly once. This is achieved using a four-step handshake process:</p>
<ul>
<li>The sender sends the message and keeps a copy of it. The message is marked as “unconfirmed”.</li>
<li>The receiver responds with a PUBREC message to acknowledge receipt of the message.</li>
<li>The sender receives the PUBREC message, removes the “unconfirmed” mark from the stored message, and responds with a PUBREL message.</li>
<li>Finally, the receiver responds with a PUBCOMP message to confirm that it has processed the PUBREL message. The sender can now safely delete the message from its storage.</li>
</ul>
</li>
</ol>
<p>Each level of service has different trade-offs in terms of network traffic, latency, and complexity. You should choose the appropriate QoS level based on the specific requirements of your application.</p>
<h2 id="Subscribe"><a href="#Subscribe" class="headerlink" title="Subscribe"></a>Subscribe</h2><p>If no client subscribes to a topic, any messages published to that topic won’t be received by any client. Clients need to send a subscription request to the broker in order to subscribe to the corresponding topic.</p>
<h3 id="Format-1"><a href="#Format-1" class="headerlink" title="Format"></a>Format</h3><div align="center">
<img src="/2023/07/21/MQTT-Publish-Subscribe/2.png" style="zoom:100%;">
</div>

<h4 id="Packet-Identifier"><a href="#Packet-Identifier" class="headerlink" title="Packet Identifier"></a>Packet Identifier</h4><p>This is a unique identifier for each SUBSCRIBE message. Both the broker and client maintain their own Packet Identifier for each ongoing conversation. The identifier doesn’t need to be globally unique, but it does need to be unique within the scope of the client-broker communication session.</p>
<h4 id="Subscription-List"><a href="#Subscription-List" class="headerlink" title="Subscription List"></a>Subscription List</h4><p>A single SUBSCRIBE message can request multiple topic subscriptions. Each subscription request needs to include the topic to be subscribed to and the desired Quality of Service (QoS) level. The topic string in the SUBSCRIBE packet can include wildcard characters. If the same topic is subscribed to with different QoS levels (i.e., overlapping subscriptions), the broker will deliver messages to the client at the highest QoS level that has been granted.</p>
<h2 id="Subscription-Acknowledgement"><a href="#Subscription-Acknowledgement" class="headerlink" title="Subscription Acknowledgement"></a>Subscription Acknowledgement</h2><p>After the client requests to subscribe to a topic, the broker will respond with a SUBACK.</p>
<h3 id="Format-2"><a href="#Format-2" class="headerlink" title="Format"></a>Format</h3><p>The message includes a Packet Identifier that matches the one in the subscription request, as well as a set of return codes, as shown below:</p>
<div align="center">
<img src="/2023/07/21/MQTT-Publish-Subscribe/3.png" style="zoom:100%;">
</div>


<h4 id="Packet-Identifier-1"><a href="#Packet-Identifier-1" class="headerlink" title="Packet Identifier"></a>Packet Identifier</h4><p>This Packet Identifier should match the one in the corresponding subscription request.</p>
<h4 id="Return-Codes"><a href="#Return-Codes" class="headerlink" title="Return Codes"></a>Return Codes</h4><p>The return codes correspond to the QoS-topic list in the subscription request, confirming the result of each subscription one-to-one. If successful, the corresponding Quality of Service (0/1/2) will be returned. If the subscription fails, the return code will be 0x80 (128 in decimal).</p>
<p>After the client initiates a subscription and receives a successful subscription acknowledgement, this client will be able to normally receive any subsequent messages sent to that topic.</p>
<h2 id="Unsubscribe"><a href="#Unsubscribe" class="headerlink" title="Unsubscribe"></a>Unsubscribe</h2><p>The UNSUBSCRIBE packet is as follows, mainly containing a Packet Identifier and a list of topics to be unsubscribed:</p>
<div align="center">
<img src="/2023/07/21/MQTT-Publish-Subscribe/4.png" style="zoom:100%;">
</div>


<h2 id="Unsubscribe-Acknowledgement"><a href="#Unsubscribe-Acknowledgement" class="headerlink" title="Unsubscribe Acknowledgement"></a>Unsubscribe Acknowledgement</h2><p>The return for an UNSUBSCRIBE request is an UNSUBACK message that only contains a Packet Identifier matching the one in the UNSUBSCRIBE request. An UNSUBACK is sent regardless of whether the topic was previously subscribed to or not.</p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>MQTT message delivery is implemented through subscribing to specific topics, then publishing messages to those topics.</p>
<p>There’s no need to create and maintain topics before publishing, nor worry about whether there are clients subscribing to specific topics.</p>
<p>The Publish/Subscribe model decouples publishers and subscribers, making it easier to arrange various business scenarios, such as implementing grouping, broadcasting, etc.</p>
<p>However, the Publish/Subscribe model also brings a challenge: if the publisher wishes to be aware of the subscriber’s receipt of a message, this can only be accomplished at the application layer. For example, after a subscriber receives a message, it can publish a confirmation message to the publisher through another topic.</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Gepostet vor&nbsp;<time dateTime="2022-03-15T13:10:43.000Z" title="2022/3/15 下午9:10:43">2022-03-15</time></span><span class="level-item">4 minutes lesen (Über 652 Wörter)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/03/15/TDengine-%E9%83%A8%E7%BD%B2%E5%B9%B6%E4%B8%8E-Kuiper-%E4%BA%A4%E4%BA%92/">TDengine 部署并与 Kuiper 交互</a></h1><div class="content"><h2 id="安装和启动"><a href="#安装和启动" class="headerlink" title="安装和启动"></a>安装和启动</h2><p>Ubuntu 系统使用 apt-get 工具从官方仓库安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wget -qO - http://repos.taosdata.com/tdengine.key | sudo apt-key add -</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;deb [arch=amd64] http://repos.taosdata.com/tdengine-stable stable main&quot;</span> | sudo tee /etc/apt/sources.list.d/tdengine-stable.list</span><br><span class="line">sudo apt-get update</span><br><span class="line">apt-cache policy tdengine</span><br><span class="line">sudo apt-get install tdengine</span><br></pre></td></tr></table></figure>
<p>启动</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start taosd</span><br></pre></td></tr></table></figure>
<p>执行 TDengine 客户端程序，只要在 Linux 终端执行 taos 即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">taos</span><br></pre></td></tr></table></figure>
<h2 id="与-Kuiper-交互"><a href="#与-Kuiper-交互" class="headerlink" title="与 Kuiper 交互"></a>与 Kuiper 交互</h2><p>安装 TDengine 插件，注意当前 TDengine 客户端版本为 2.4.0.12</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -d <span class="string">&quot;&#123;\&quot;name\&quot;:\&quot;tdengine\&quot;,\&quot;file\&quot;:\&quot;https://packages.emqx.io/kuiper-plugins/1.4.3/debian/sinks/tdengine_amd64.zip\&quot;,\&quot;shellParas\&quot;: [\&quot;2.4.0.12\&quot;]&#125;&quot;</span> http://127.0.0.1:9081/plugins/sinks</span><br></pre></td></tr></table></figure>
<p>进入 TDengine 客户端，创建 test 用户</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create user test pass &#39;test&#39;;</span><br></pre></td></tr></table></figure>
<p>切换 test 用户，创建数据库和数据表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create database test;</span><br><span class="line"></span><br><span class="line">create stable sensordata (time timestamp,temperature float,humidity float) tags (location binary(64));</span><br><span class="line">create table bedroom_sensordata using sensordata tags(&quot;bedroom&quot;);</span><br><span class="line">create table balcony_sensordata using sensordata tags(&quot;balcony&quot;);</span><br><span class="line">create table toilet_sensordata using sensordata tags(&quot;toilet&quot;);</span><br></pre></td></tr></table></figure>
<p>创建 device1、device2、device3 三个 stream，分别接收MQTT test/bedroom、test/balcony、test/toilet 主题消息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kuiper create stream device1 <span class="string">&#x27;(temperature float, humidity float) WITH (FORMAT=&quot;JSON&quot;, DATASOURCE=&quot;test/bedroom&quot;)&#x27;</span></span><br><span class="line">kuiper create stream device2 <span class="string">&#x27;(temperature float, humidity float) WITH (FORMAT=&quot;JSON&quot;, DATASOURCE=&quot;test/balcony&quot;)&#x27;</span></span><br><span class="line">kuiper create stream device3 <span class="string">&#x27;(temperature float, humidity float) WITH (FORMAT=&quot;JSON&quot;, DATASOURCE=&quot;test/toilet&quot;)&#x27;</span></span><br></pre></td></tr></table></figure>
<p>编写 demoRule1，demoRule2，demoRule3 规则</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"># demoRule1</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;sql&quot;</span>: <span class="string">&quot;SELECT temperature,humidity FROM device1 WHERE isNull(temperature,humidity) = false&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;actions&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;tdengine&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;provideTs&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">                <span class="attr">&quot;tsFieldName&quot;</span>: <span class="string">&quot;time&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;port&quot;</span>: <span class="number">0</span>,</span><br><span class="line">                <span class="attr">&quot;ip&quot;</span>: <span class="string">&quot;127.0.0.1&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;user&quot;</span>: <span class="string">&quot;test&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;test&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;database&quot;</span>: <span class="string">&quot;test&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;table&quot;</span>: <span class="string">&quot;bedroom_sensordata&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;fields&quot;</span>: [</span><br><span class="line">                    <span class="string">&quot;temperature&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;humidity&quot;</span></span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;log&quot;</span>: &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"># demoRule2</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;sql&quot;</span>: <span class="string">&quot;SELECT temperature,humidity FROM device2 WHERE isNull(temperature,humidity) = false&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;actions&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;tdengine&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;provideTs&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">                <span class="attr">&quot;tsFieldName&quot;</span>: <span class="string">&quot;time&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;port&quot;</span>: <span class="number">0</span>,</span><br><span class="line">                <span class="attr">&quot;ip&quot;</span>: <span class="string">&quot;127.0.0.1&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;user&quot;</span>: <span class="string">&quot;test&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;test&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;database&quot;</span>: <span class="string">&quot;test&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;table&quot;</span>: <span class="string">&quot;balcony_sensordata&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;fields&quot;</span>: [</span><br><span class="line">                    <span class="string">&quot;temperature&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;humidity&quot;</span></span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;log&quot;</span>: &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"># demoRule3</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;sql&quot;</span>: <span class="string">&quot;SELECT temperature,humidity FROM device3 WHERE isNull(temperature,humidity) = false&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;actions&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;tdengine&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;provideTs&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">                <span class="attr">&quot;tsFieldName&quot;</span>: <span class="string">&quot;time&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;port&quot;</span>: <span class="number">0</span>,</span><br><span class="line">                <span class="attr">&quot;ip&quot;</span>: <span class="string">&quot;127.0.0.1&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;user&quot;</span>: <span class="string">&quot;test&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;test&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;database&quot;</span>: <span class="string">&quot;test&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;table&quot;</span>: <span class="string">&quot;toilet_sensordata&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;fields&quot;</span>: [</span><br><span class="line">                    <span class="string">&quot;temperature&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;humidity&quot;</span></span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;log&quot;</span>: &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>创建 demoRule 规则</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kuiper create rule demoRule1 -f demoRule1</span><br><span class="line">kuiper create rule demoRule2 -f demoRule2</span><br><span class="line">kuiper create rule demoRule3 -f demoRule3</span><br></pre></td></tr></table></figure>
<p><code>kuiper show rules</code>，查看规则是否处于运行状态</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Connecting to 127.0.0.1:20498... </span><br><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;id&quot;: &quot;demoRule1&quot;,</span><br><span class="line">    &quot;status&quot;: &quot;Running&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;id&quot;: &quot;demoRule2&quot;,</span><br><span class="line">    &quot;status&quot;: &quot;Running&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;id&quot;: &quot;demoRule3&quot;,</span><br><span class="line">    &quot;status&quot;: &quot;Running&quot;</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>用 Go 编写测试代码（见附录），向 MQTT Broker 发送温度和湿度数据。一段时间过后，在 TDengine 客户端查看接收到的数据</p>
<div align="center">
<img src="/2022/03/15/TDengine-%E9%83%A8%E7%BD%B2%E5%B9%B6%E4%B8%8E-Kuiper-%E4%BA%A4%E4%BA%92/sensordata.png" style="zoom:100%;">
</div>

<h2 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h2><p>Go 发送消息测试完整代码：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;math/rand&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line"></span><br><span class="line">	mqtt <span class="string">&quot;github.com/eclipse/paho.mqtt.golang&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> f mqtt.MessageHandler = <span class="function"><span class="keyword">func</span><span class="params">(client mqtt.Client, msg mqtt.Message)</span></span> &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;TOPIC: %s\n&quot;</span>, msg.Topic())</span><br><span class="line">	fmt.Printf(<span class="string">&quot;MSG: %s\n&quot;</span>, msg.Payload())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">genPair</span><span class="params">()</span> <span class="params">(<span class="keyword">float64</span>, <span class="keyword">float64</span>)</span></span> &#123;</span><br><span class="line">	t := (<span class="number">200.0</span> + <span class="keyword">float64</span>(rand.Intn(<span class="number">120</span>))) / <span class="number">10.0</span></span><br><span class="line">	h := (<span class="number">500.0</span> + <span class="keyword">float64</span>(rand.Intn(<span class="number">350</span>))) / <span class="number">10.0</span></span><br><span class="line">	<span class="keyword">return</span> t, h</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">genLocation</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">	locations := []<span class="keyword">string</span>&#123;<span class="string">&quot;bedroom&quot;</span>, <span class="string">&quot;balcony&quot;</span>, <span class="string">&quot;toilet&quot;</span>&#125;</span><br><span class="line">	i := rand.Intn(<span class="number">3</span>)</span><br><span class="line">	<span class="keyword">return</span> locations[i]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	mqtt.DEBUG = log.New(os.Stdout, <span class="string">&quot;&quot;</span>, <span class="number">0</span>)</span><br><span class="line">	mqtt.ERROR = log.New(os.Stdout, <span class="string">&quot;&quot;</span>, <span class="number">0</span>)</span><br><span class="line">	opts := mqtt.NewClientOptions().AddBroker(<span class="string">&quot;mqtt://175.178.160.127:1883&quot;</span>)</span><br><span class="line"></span><br><span class="line">	opts.SetKeepAlive(<span class="number">60</span> * time.Second)</span><br><span class="line">	opts.SetDefaultPublishHandler(f)</span><br><span class="line">	opts.SetPingTimeout(<span class="number">1</span> * time.Second)</span><br><span class="line"></span><br><span class="line">	c := mqtt.NewClient(opts)</span><br><span class="line">	<span class="keyword">if</span> token := c.Connect(); token.Wait() &amp;&amp; token.Error() != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(token.Error())</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// pub msg loop</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		t, h := genPair()</span><br><span class="line">		payload := fmt.Sprintf(<span class="string">&quot;&#123;\&quot;temperature\&quot;:%f, \&quot;humidity\&quot;:%f&#125;&quot;</span>, t, h)</span><br><span class="line">		token := c.Publish(<span class="string">&quot;test/&quot;</span>+genLocation(), <span class="number">0</span>, <span class="literal">false</span>, payload)</span><br><span class="line">		token.Wait()</span><br><span class="line">		<span class="comment">// wait 10s</span></span><br><span class="line">		time.Sleep(<span class="number">10</span> * time.Second)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Gepostet vor&nbsp;<time dateTime="2022-03-11T13:06:44.000Z" title="2022/3/11 下午9:06:44">2022-03-11</time></span><span class="level-item">3 minutes lesen (Über 425 Wörter)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/03/11/Ubuntu-%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8-Kuiper/">Ubuntu 安装使用 Kuiper</a></h1><div class="content"><h2 id="下载和安装"><a href="#下载和安装" class="headerlink" title="下载和安装"></a>下载和安装</h2><p>通过 <a target="_blank" rel="noopener" href="https://github.com/lf-edge/ekuiper/releases">https://github.com/lf-edge/ekuiper/releases</a> 获取安装包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/lf-edge/ekuiper/releases/download/1.4.3/kuiper-1.4.3-linux-amd64.deb</span><br><span class="line">sudo dpkg -i kuiper-1.4.3-linux-amd64.deb</span><br></pre></td></tr></table></figure>
<p>启动 eKuiper 服务器</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start kuiper</span><br></pre></td></tr></table></figure>
<h2 id="运行第一个规则流"><a href="#运行第一个规则流" class="headerlink" title="运行第一个规则流"></a>运行第一个规则流</h2><h3 id="定义输入流"><a href="#定义输入流" class="headerlink" title="定义输入流"></a>定义输入流</h3><p>创建一个名为 demo 的流，该流使用 DATASOURCE 属性中指定的 MQTT test 主题。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kuiper create stream demo <span class="string">&#x27;(temperature float, humidity bigint) WITH (FORMAT=&quot;JSON&quot;, DATASOURCE=&quot;test&quot;)&#x27;</span></span><br></pre></td></tr></table></figure>
<p>MQTT 源将通过 tcp://localhost:1883 连接到 MQTT 消息服务器，如果 MQTT 消息服务器位于别的位置，请在etc/mqtt_source.yaml中进行修改。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">default:</span></span><br><span class="line">  <span class="attr">qos:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">sharedsubscription:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">servers:</span> [<span class="string">tcp://127.0.0.1:1883</span>]</span><br></pre></td></tr></table></figure>
<p>使用 kuiper show streams 命令来查看是否创建了 demo 流。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kuiper show streams</span><br></pre></td></tr></table></figure>
<h3 id="通过查询工具测试流"><a href="#通过查询工具测试流" class="headerlink" title="通过查询工具测试流"></a>通过查询工具测试流</h3><p>通过 kuiper query 命令对其进行测试</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kuiper query</span><br><span class="line"></span><br><span class="line">kuiper &gt; select count(*), avg(humidity) as avg_hum, max(humidity) as max_hum from demo <span class="built_in">where</span> temperature &gt; 30 group by TUMBLINGWINDOW(ss, 5);</span><br></pre></td></tr></table></figure>
<h3 id="编写规则"><a href="#编写规则" class="headerlink" title="编写规则"></a>编写规则</h3><p>rule 由三部分组成：</p>
<ul>
<li>规则名称：它必须是唯一的</li>
<li>sql：针对规则运行的查询</li>
<li>动作：规则的输出动作</li>
</ul>
<p><code>myRule</code> 文件的内容。对于在1分钟内滚动时间窗口中的平均温度大于30的事件，它将打印到日志中。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;sql&quot;</span>: <span class="string">&quot;SELECT temperature from demo where temperature &gt; 30&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;actions&quot;</span>: [&#123;</span><br><span class="line">        <span class="attr">&quot;log&quot;</span>:  &#123;&#125;</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行 kuiper rule 命令来创建 ruleDemo 规则</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kuiper create rule ruleDemo -f myRule</span><br></pre></td></tr></table></figure>
<h3 id="测试规则"><a href="#测试规则" class="headerlink" title="测试规则"></a>测试规则</h3><p>使用 MQTT 客户端将消息发布到 test 主题即可。消息应为 json 格式</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mosquitto_pub -h 192.168.181.97 -t <span class="string">&quot;test&quot;</span> -m <span class="string">&quot;&#123;\&quot;temperature\&quot;:31.2, \&quot;humidity\&quot;: 77&#125;&quot;</span></span><br><span class="line">mosquitto_pub -h 192.168.181.97 -t <span class="string">&quot;test&quot;</span> -m <span class="string">&quot;&#123;\&quot;temperature\&quot;:29, \&quot;humidity\&quot;: 80&#125;&quot;</span></span><br></pre></td></tr></table></figure>
<p>查看日志</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail -f /var/<span class="built_in">log</span>/kuiper/stream.log</span><br></pre></td></tr></table></figure>
<h3 id="管理规则"><a href="#管理规则" class="headerlink" title="管理规则"></a>管理规则</h3><p>开启规则</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kuiper start rule ruleDemo</span><br></pre></td></tr></table></figure>
<p>暂停规则</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kuiper stop rule ruleDemo</span><br></pre></td></tr></table></figure>
<p>删除规则</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kuiper drop rule ruleDemo</span><br></pre></td></tr></table></figure></div></article></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/logo.jpg" alt="Iggie Wang (王亮)"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Iggie Wang (王亮)</p><p class="is-size-6 is-block">WNLO, HUST</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Wuhan, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Seiten</p><a href="/archives"><p class="title">42</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Kategorien</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">15</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/hey-kong" target="_blank" rel="noopener">Folgen</a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://github.com/hey-kong" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Github</span></span><span class="level-right"><span class="level-item tag">github.com</span></span></a></li><li><a class="level is-mobile" href="iggiewang@gmail.com" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Email</span></span><span class="level-right"><span class="level-item tag">iggiewang@gmail.com</span></span></a></li></ul></div></div></div><!--!--><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archive</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2023/08/"><span class="level-start"><span class="level-item">August 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/07/"><span class="level-start"><span class="level-item">July 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/12/"><span class="level-start"><span class="level-item">December 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/06/"><span class="level-start"><span class="level-item">June 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/05/"><span class="level-start"><span class="level-item">May 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/03/"><span class="level-start"><span class="level-item">March 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/02/"><span class="level-start"><span class="level-item">February 2022</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/01/"><span class="level-start"><span class="level-item">January 2022</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/10/"><span class="level-start"><span class="level-item">October 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/09/"><span class="level-start"><span class="level-item">September 2021</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/08/"><span class="level-start"><span class="level-item">August 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/07/"><span class="level-start"><span class="level-item">July 2021</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/05/"><span class="level-start"><span class="level-item">May 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/04/"><span class="level-start"><span class="level-item">April 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/03/"><span class="level-start"><span class="level-item">March 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/02/"><span class="level-start"><span class="level-item">February 2021</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/01/"><span class="level-start"><span class="level-item">January 2021</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/CSAPP/"><span class="tag">CSAPP</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Cache/"><span class="tag">Cache</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Chinese/"><span class="tag">Chinese</span><span class="tag">37</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Database/"><span class="tag">Database</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Edge-computing/"><span class="tag">Edge computing</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/English/"><span class="tag">English</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/File-System/"><span class="tag">File System</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Key-Value-Store/"><span class="tag">Key-Value Store</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/KubeEdge/"><span class="tag">KubeEdge</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Learned-Index/"><span class="tag">Learned Index</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RDMA/"><span class="tag">RDMA</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Rocksdb/"><span class="tag">Rocksdb</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker/"><span class="tag">docker</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/etcd/"><span class="tag">etcd</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/k8s/"><span class="tag">k8s</span><span class="tag">4</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">Iggie Wang&#039;s Cyberspace</a><p class="is-size-7"><span>&copy; 2023 王亮</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdnjs.loli.net/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" defer></script><script>moment.locale("default");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Zurück nach oben" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "Diese Website verwendet Cookies, um Ihre Erfahrung zu verbessern.",
          dismiss: "Verstanden!",
          allow: "Cookies zulassen",
          deny: "Ablehnen",
          link: "Mehr erfahren",
          policy: "Cookie-Richtlinie",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.8/js/lightgallery.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdnjs.loli.net/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Tippen Sie etwas..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Tippen Sie etwas...","untitled":"(Ohne Titel)","posts":"Seiten","pages":"Pages","categories":"Kategorien","tags":"Tags"});
        });</script></body></html>